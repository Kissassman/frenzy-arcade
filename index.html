<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monster Survivors - Best Free Online Survival Game | Frenzy Arcade</title>
    <meta name="description" content="Play Monster Survivors free online! Survival game with achievements, leaderboards, and social features. No download required. Join thousands of players now!">
    <meta name="keywords" content="monster survivors, survival game, online game, free game, browser game, arcade game, action game">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://frenzyarcade.com/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://frenzyarcade.com/">
    <meta property="og:title" content="Monster Survivors - Best Free Online Survival Game">
    <meta property="og:description" content="🎮 Play Monster Survivors free! Epic survival game with achievements & leaderboards. Join thousands of players now!">
    <meta property="og:image" content="https://frenzyarcade.com/og-monster-survivors.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://frenzyarcade.com/">
    <meta name="twitter:title" content="Monster Survivors - Best Free Online Survival Game">
    <meta name="twitter:description" content="🎮 Play Monster Survivors free! Epic survival game with achievements & leaderboards. Join thousands of players now!">
    <meta name="twitter:image" content="https://frenzyarcade.com/og-monster-survivors.jpg">

    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "VideoGame",
      "name": "Monster Survivors",
      "url": "https://frenzyarcade.com/",
      "image": "https://frenzyarcade.com/og-monster-survivors.jpg",
      "description": "Play Monster Survivors free online! Epic survival game with achievements, leaderboards, and social features.",
      "applicationCategory": "Game",
      "operatingSystem": "Any",
      "gamePlayMode": "SinglePlayer",
      "genre": ["Action", "Survival", "Arcade"],
      "author": {
        "@type": "Organization",
        "name": "Frenzy Arcade"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "1250"
      }
    }
    </script>

    <!-- Preload Critical Resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cloud.onlinegames.io">
    <link rel="dns-prefetch" href="https://ipinfo.io">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#007AFF',
            secondary: '#34C759',
            accent: '#FF9500',
            danger: '#FF3B30',
            background: '#F2F2F7',
            surface: '#FFFFFF',
            dark: '#1C1C1E',
            darkSecondary: '#2C2C2E'
          },
          animation: {
            'pulse-glow': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'bounce-in': 'bounceIn 0.5s ease-out',
            'slide-up': 'slideUp 0.3s ease-out'
          }
        }
      }
    }
    </script>

    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .achievement-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        
        .achievement-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .achievement-locked {
            filter: grayscale(100%) opacity(0.5);
        }
        
        .achievement-unlocked {
            animation: bounceIn 0.6s ease-out;
        }
        
        .chat-message {
            animation: slideUp 0.3s ease-out;
        }
        
        .floating-hearts {
            position: absolute;
            pointer-events: none;
            animation: floatUp 3s ease-out forwards;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.1); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes floatUp {
            to {
                transform: translateY(-100px);
                opacity: 0;
            }
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .neon-glow {
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.6), 0 0 40px rgba(118, 75, 162, 0.4);
        }
        
        .loading-dots::after {
            content: '';
            animation: dots 1.5s steps(5, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60% { content: '...'; }
            90%, 100% { content: ''; }
        }
        
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Floating Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-10 left-10 w-20 h-20 bg-white/10 rounded-full animate-pulse"></div>
        <div class="absolute top-32 right-20 w-16 h-16 bg-white/10 rounded-full animate-pulse" style="animation-delay: 1s"></div>
        <div class="absolute bottom-20 left-1/4 w-24 h-24 bg-white/10 rounded-full animate-pulse" style="animation-delay: 2s"></div>
        <div class="absolute bottom-32 right-1/4 w-12 h-12 bg-white/10 rounded-full animate-pulse" style="animation-delay: 0.5s"></div>
    </div>

    <!-- Language Selector -->
    <div class="absolute right-4 top-4 z-50">
        <select class="bg-white/90 border rounded-lg px-3 py-2 text-sm font-medium cursor-pointer">
            <option value="en">🇺🇸 English</option>
            <option value="zh">🇨🇳 中文</option>
            <option value="es">🇪🇸 Español</option>
            <option value="fr">🇫🇷 Français</option>
        </select>
    </div>

    <!-- Header -->
    <header class="bg-white/90 backdrop-filter backdrop-blur-lg shadow-lg border-b border-white/20">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex flex-col lg:flex-row items-center justify-between">
                <div class="text-center lg:text-left mb-4 lg:mb-0">
                    <h1 class="text-3xl lg:text-4xl font-bold gradient-text">🎮 Monster Survivors</h1>
                    <p class="text-gray-600 mt-1">Join <span id="player-count" class="font-semibold text-primary">12,847</span> players online!</p>
                </div>
                <nav class="flex flex-wrap gap-6 text-sm font-medium">
                    <a href="#play" class="text-gray-700 hover:text-primary transition-colors">🎯 Play</a>
                    <a href="#leaderboard" class="text-gray-700 hover:text-primary transition-colors">🏆 Leaderboard</a>
                    <a href="#achievements" class="text-gray-700 hover:text-primary transition-colors">🎖️ Achievements</a>
                    <a href="#community" class="text-gray-700 hover:text-primary transition-colors">💬 Community</a>
                    <a href="#stats" class="text-gray-700 hover:text-primary transition-colors">📊 Stats</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-6">
        <!-- Player Profile Section -->
        <div class="bg-white/90 backdrop-filter backdrop-blur-lg rounded-2xl p-6 mb-6 shadow-lg">
            <div class="flex flex-col md:flex-row items-center justify-between">
                <div class="flex items-center space-x-4 mb-4 md:mb-0">
                    <div class="w-16 h-16 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center text-white text-2xl font-bold">
                        <span id="player-avatar">🎮</span>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold">
                            <span id="player-nickname" class="text-gray-800">Loading...</span>
                            <span id="player-flag" class="ml-2">🌍</span>
                        </h2>
                        <p class="text-gray-600">Level <span id="player-level">1</span> • <span id="player-xp">0</span> XP</p>
                    </div>
                </div>
                <div class="flex flex-wrap gap-2">
                    <button id="change-nickname-btn" class="bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors">
                        ✏️ Change Name
                    </button>
                    <button id="share-profile-btn" class="bg-secondary text-white px-4 py-2 rounded-lg font-medium hover:bg-green-600 transition-colors">
                        📤 Share Profile
                    </button>
                    <button id="export-data-btn" class="bg-accent text-white px-4 py-2 rounded-lg font-medium hover:bg-orange-600 transition-colors">
                        📁 Export Data
                    </button>
                </div>
            </div>
        </div>

        <!-- Game Section -->
        <section id="play" class="mb-8">
            <div class="game-container rounded-3xl overflow-hidden neon-glow">
                <!-- Game Header -->
                <div class="bg-gradient-to-r from-primary to-secondary p-4 text-white">
                    <div class="flex justify-between items-center">
                        <h2 class="text-2xl font-bold">🎯 Play Monster Survivors</h2>
                        <div class="flex items-center space-x-4">
                            <button id="fullscreen-btn" class="bg-white/20 hover:bg-white/30 px-3 py-2 rounded-lg transition-colors">
                                🔳 Fullscreen
                            </button>
                            <div class="text-sm">
                                <div>⏱️ Best Time: <span id="best-time">--:--</span></div>
                                <div>🏆 High Score: <span id="high-score">0</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Game Container -->
                <div class="relative bg-black" style="aspect-ratio: 16/9; min-height: 480px;">
                    <!-- Loading Screen -->
                    <div id="game-loader" class="absolute inset-0 flex items-center justify-center bg-gradient-to-br from-primary to-secondary text-white z-20">
                        <div class="text-center">
                            <div class="text-6xl mb-4">🎮</div>
                            <h3 class="text-2xl font-bold mb-2">Loading Game<span class="loading-dots"></span></h3>
                            <div class="w-64 h-2 bg-white/20 rounded-full mx-auto">
                                <div id="loading-progress" class="h-full bg-white rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                            <p class="mt-2 text-sm opacity-80">Preparing your epic survival adventure...</p>
                        </div>
                    </div>

                    <!-- Game Iframe -->
                    <iframe
                        id="game-iframe"
                        src="https://cloud.onlinegames.io/games/2025/unity/monster-survivors/index-og.html"
                        class="absolute inset-0 w-full h-full"
                        allowfullscreen
                        scrolling="no"
                        title="Monster Survivors Game"
                        loading="eager">
                    </iframe>

                    <!-- Game Fallback -->
                    <div id="game-fallback" class="hidden absolute inset-0 flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 text-gray-800 z-10">
                        <div class="text-center p-8">
                            <div class="text-6xl mb-4">😞</div>
                            <h3 class="text-2xl font-bold mb-4">Game Loading Failed</h3>
                            <p class="mb-6">The game couldn't load. This might be due to network issues or server problems.</p>
                            <div class="space-y-3">
                                <button id="retry-game-btn" class="bg-primary text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-600 transition-colors block mx-auto">
                                    🔄 Retry Loading
                                </button>
                                <button onclick="location.reload()" class="bg-gray-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-600 transition-colors block mx-auto">
                                    🌐 Refresh Page
                                </button>
                            </div>
                            <p class="mt-4 text-sm text-gray-600">
                                💡 <strong>Tip:</strong> Try checking your internet connection or wait a few minutes and retry.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Game Controls Info -->
                <div class="bg-gray-50 p-4 border-t">
                    <div class="flex flex-wrap items-center justify-between text-sm">
                        <div class="flex items-center space-x-6">
                            <span>🎹 <strong>Controls:</strong> WASD or Arrow Keys</span>
                            <span>📱 <strong>Mobile:</strong> Tap to move</span>
                            <span>🎯 <strong>Goal:</strong> Survive as long as possible</span>
                        </div>
                        <div class="flex items-center space-x-2 mt-2 md:mt-0">
                            <button id="manual-score-btn" class="bg-accent text-white px-4 py-2 rounded-lg font-medium hover:bg-orange-600 transition-colors">
                                📝 Record Score
                            </button>
                            <button id="how-to-play-btn" class="text-primary hover:text-blue-600 font-medium">
                                ❓ How to Play
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats Dashboard -->
        <section id="stats" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-white/90 backdrop-filter backdrop-blur-lg rounded-2xl p-6 shadow-lg">
                <h3 class="text-lg font-bold mb-4 gradient-text">📊 Your Stats</h3>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span>Games Played:</span>
                        <span id="games-played" class="font-bold">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Total Time:</span>
                        <span id="total-time" class="font-bold">0h 0m</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Monsters Defeated:</span>
                        <span id="total-kills" class="font-bold">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Achievements:</span>
                        <span id="achievement-count" class="font-bold">0/12</span>
                    </div>
                </div>
            </div>

            <div class="bg-white/90 backdrop-filter backdrop-blur-lg rounded-2xl p-6 shadow-lg">
                <h3 class="text-lg font-bold mb-4 gradient-text">🏆 Leaderboard Preview</h3>
                <div id="mini-leaderboard" class="space-y-2">
                    <div class="flex items-center justify-between text-sm">
                        <span>1. 🇺🇸 ProGamer</span>
                        <span class="font-bold">15:42</span>
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <span>2. 🇯🇵 SurvivalKing</span>
                        <span class="font-bold">14:38</span>
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <span>3. 🇩🇪 MonsterHunter</span>
                        <span class="font-bold">13:25</span>
                    </div>
                </div>
                <button class="w-full mt-4 bg-primary text-white py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors">
                    View Full Leaderboard
                </button>
            </div>

            <div class="bg-white/90 backdrop-filter backdrop-blur-lg rounded-2xl p-6 shadow-lg">
                <h3 class="text-lg font-bold mb-4 gradient-text">🎯 Daily Challenge</h3>
                <div class="text-center">
                    <div class="text-3xl mb-2">🏹</div>
                    <h4 class="font-bold mb-2">Archer's Challenge</h4>
                    <p class="text-sm text-gray-600 mb-4">Defeat 100 monsters using only bow weapons</p>
                    <div class="text-sm">
                        <div>Progress: <span class="font-bold">23/100</span></div>
                        <div>Reward: <span class="font-bold text-secondary">+500 XP</span></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Achievements Section -->
        <section id="achievements" class="mb-8">
            <div class="bg-white/90 backdrop-filter backdrop-blur-lg rounded-2xl p-6 shadow-lg">
                <h2 class="text-2xl font-bold mb-6 gradient-text">🎖️ Achievements</h2>
                <div id="achievement-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                    <!-- Achievements will be populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Community Section -->
        <section id="community" class="mb-8">
            <div class="bg-white/90 backdrop-filter backdrop-blur-lg rounded-2xl p-6 shadow-lg">
                <h2 class="text-2xl font-bold mb-6 gradient-text">💬 Community Chat</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Chat Messages -->
                    <div>
                        <div id="chat-messages" class="h-64 overflow-y-auto custom-scrollbar bg-gray-50 rounded-lg p-4 mb-4">
                            <!-- Chat messages will be populated by JavaScript -->
                        </div>
                        <div class="flex space-x-2">
                            <input type="text" id="chat-input" class="flex-1 border rounded-lg px-4 py-2" placeholder="Type your message..." maxlength="100">
                            <button id="send-chat-btn" class="bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors">
                                Send
                            </button>
                        </div>
                    </div>
                    
                    <!-- Recent Scores & Social Features -->
                    <div>
                        <h3 class="font-bold mb-4">🎉 Recent High Scores</h3>
                        <div id="recent-scores" class="space-y-3 mb-6">
                            <!-- Recent scores will be populated by JavaScript -->
                        </div>
                        
                        <div class="space-y-3">
                            <button id="share-score-btn" class="w-full bg-secondary text-white py-3 rounded-lg font-medium hover:bg-green-600 transition-colors">
                                📤 Share Your Score
                            </button>
                            <button id="challenge-friend-btn" class="w-full bg-accent text-white py-3 rounded-lg font-medium hover:bg-orange-600 transition-colors">
                                ⚔️ Challenge a Friend
                            </button>
                            <div class="text-xs text-gray-500 text-center p-2 bg-gray-50 rounded">
                                💡 <strong>Note:</strong> Chat and leaderboard are currently local-only features. Your messages are only visible on this device.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tips & Strategies -->
        <section class="mb-8">
            <div class="bg-white/90 backdrop-filter backdrop-blur-lg rounded-2xl p-6 shadow-lg">
                <h2 class="text-2xl font-bold mb-6 gradient-text">💡 Pro Tips & Strategies</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-bold mb-3 text-lg">🎯 Survival Tips</h3>
                        <ul class="space-y-2 text-sm">
                            <li>• Keep moving constantly to avoid monster swarms</li>
                            <li>• Prioritize experience gems over coins early game</li>
                            <li>• Use walls and obstacles to funnel enemies</li>
                            <li>• Upgrade movement speed first for better positioning</li>
                            <li>• Learn enemy patterns and timing</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-bold mb-3 text-lg">⚔️ Combat Strategies</h3>
                        <ul class="space-y-2 text-sm">
                            <li>• Experiment with different weapon combinations</li>
                            <li>• Balance damage output with area coverage</li>
                            <li>• Time your special abilities carefully</li>
                            <li>• Focus on crowd control in later waves</li>
                            <li>• Don't neglect defensive upgrades</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-white/90 backdrop-filter backdrop-blur-lg border-t border-white/20 text-center py-8">
        <div class="max-w-7xl mx-auto px-4">
            <p class="text-gray-600 mb-4">
                &copy; 2025 <a href="https://frenzyarcade.com/" class="text-primary hover:underline font-medium">FrenzyArcade.com</a> - 
                The Ultimate Gaming Destination
            </p>
            <div class="flex flex-wrap justify-center gap-6 text-sm mb-4">
                <a href="/privacy.html" class="text-gray-600 hover:text-primary">Privacy Policy</a>
                <a href="/terms.html" class="text-gray-600 hover:text-primary">Terms of Service</a>
                <a href="/contact.html" class="text-gray-600 hover:text-primary">Contact Us</a>
                <a href="/about.html" class="text-gray-600 hover:text-primary">About</a>
            </div>
            <p class="text-xs text-gray-500">
                All games are property of their respective owners. FrenzyArcade.com hosts games for entertainment purposes only.
            </p>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Nickname Change Modal -->
    <div id="nickname-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <h3 class="text-2xl font-bold mb-6 text-center gradient-text">✏️ Change Your Nickname</h3>
            <div class="space-y-4">
                <input type="text" id="new-nickname-input" class="w-full border-2 rounded-lg px-4 py-3 text-lg" placeholder="Enter new nickname" maxlength="20">
                <div class="flex space-x-3">
                    <button id="random-name-btn" class="flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg font-medium hover:bg-gray-300 transition-colors">
                        🎲 Random
                    </button>
                    <button id="save-nickname-btn" class="flex-1 bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-600 transition-colors">
                        💾 Save
                    </button>
                </div>
                <button id="cancel-nickname-btn" class="w-full bg-gray-100 text-gray-600 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Manual Score Modal -->
    <div id="manual-score-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <h3 class="text-2xl font-bold mb-6 text-center gradient-text">📝 Record Your Score</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2">⏰ Survival Time (MM:SS)</label>
                    <input type="text" id="manual-time-input" class="w-full border-2 rounded-lg px-4 py-3" placeholder="e.g., 5:43" pattern="[0-9]+:[0-9]{2}">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">💀 Monsters Killed</label>
                    <input type="number" id="manual-kills-input" class="w-full border-2 rounded-lg px-4 py-3" placeholder="e.g., 150" min="0">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">⭐ Level Reached</label>
                    <input type="number" id="manual-level-input" class="w-full border-2 rounded-lg px-4 py-3" placeholder="e.g., 15" min="1">
                </div>
                <div class="flex space-x-3">
                    <button id="save-manual-score-btn" class="flex-1 bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-600 transition-colors">
                        💾 Save Score
                    </button>
                    <button id="cancel-manual-score-btn" class="flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg font-medium hover:bg-gray-300 transition-colors">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="share-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <h3 class="text-2xl font-bold mb-6 text-center gradient-text">📤 Share Your Achievement</h3>
            <div class="text-center mb-6">
                <div class="text-4xl mb-2">🏆</div>
                <p class="text-lg">Just survived <strong id="share-time">5:43</strong> in Monster Survivors!</p>
                <p class="text-gray-600">Think you can beat my score?</p>
            </div>
            <div class="grid grid-cols-2 gap-3">
                <button id="share-facebook-btn" class="bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors">
                    📘 Facebook
                </button>
                <button id="share-twitter-btn" class="bg-blue-400 text-white py-3 rounded-lg font-medium hover:bg-blue-500 transition-colors">
                    🐦 Twitter
                </button>
                <button id="share-whatsapp-btn" class="bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 transition-colors">
                    📱 WhatsApp
                </button>
                <button id="copy-link-btn" class="bg-gray-600 text-white py-3 rounded-lg font-medium hover:bg-gray-700 transition-colors">
                    🔗 Copy Link
                </button>
            </div>
            <button id="close-share-modal" class="w-full bg-gray-100 text-gray-600 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors mt-4">
                Close
            </button>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
    // Global State
    const gameState = {
        player: {
            nickname: '',
            flag: '🌍',
            level: 1,
            xp: 0,
            gamesPlayed: 0,
            totalTime: 0,
            totalKills: 0,
            highScore: 0,
            bestTime: 0,
            achievements: []
        },
        isGameLoaded: false,
        chat: [],
        leaderboard: []
    };

    // Achievements Database
    const achievements = [
        { id: 'first_game', icon: '🎮', title: 'First Steps', desc: 'Play your first game', unlock: () => gameState.player.gamesPlayed >= 1 },
        { id: 'survive_1min', icon: '⏰', title: 'Survivor', desc: 'Survive 1 minute', unlock: () => gameState.player.bestTime >= 60 },
        { id: 'survive_5min', icon: '⏳', title: 'Veteran', desc: 'Survive 5 minutes', unlock: () => gameState.player.bestTime >= 300 },
        { id: 'survive_10min', icon: '⌛', title: 'Master', desc: 'Survive 10 minutes', unlock: () => gameState.player.bestTime >= 600 },
        { id: 'kill_100', icon: '💀', title: 'Slayer', desc: 'Defeat 100 monsters', unlock: () => gameState.player.totalKills >= 100 },
        { id: 'kill_1000', icon: '☠️', title: 'Destroyer', desc: 'Defeat 1000 monsters', unlock: () => gameState.player.totalKills >= 1000 },
        { id: 'level_10', icon: '⭐', title: 'Rising Star', desc: 'Reach level 10', unlock: () => gameState.player.level >= 10 },
        { id: 'level_25', icon: '🌟', title: 'Champion', desc: 'Reach level 25', unlock: () => gameState.player.level >= 25 },
        { id: 'play_10', icon: '🎯', title: 'Dedicated', desc: 'Play 10 games', unlock: () => gameState.player.gamesPlayed >= 10 },
        { id: 'play_50', icon: '🔥', title: 'Addicted', desc: 'Play 50 games', unlock: () => gameState.player.gamesPlayed >= 50 },
        { id: 'time_5h', icon: '⌚', title: 'Marathon', desc: 'Play for 5 hours total', unlock: () => gameState.player.totalTime >= 18000 },
        { id: 'perfect', icon: '👑', title: 'Perfect Game', desc: 'Complete all other achievements', unlock: () => gameState.player.achievements.length >= 11 }
    ];

    // Initialize App
    document.addEventListener('DOMContentLoaded', () => {
        initializePlayer();
        setupEventListeners();
        loadGameWithProgress();
        updateUI();
        initializeChat();
        startPlayerCountAnimation();
    });

    // Player Initialization
    function initializePlayer() {
        const saved = localStorage.getItem('monsterSurvivorsPlayer');
        if (saved) {
            Object.assign(gameState.player, JSON.parse(saved));
        } else {
            generateRandomNickname();
            getUserCountry();
        }
    }

    function generateRandomNickname() {
        const adjectives = ['Swift', 'Brave', 'Mighty', 'Silent', 'Golden', 'Shadow', 'Storm', 'Fire'];
        const nouns = ['Hunter', 'Warrior', 'Guardian', 'Champion', 'Hero', 'Legend', 'Survivor', 'Master'];
        const adj = adjectives[Math.floor(Math.random() * adjectives.length)];
        const noun = nouns[Math.floor(Math.random() * nouns.length)];
        gameState.player.nickname = `${adj}${noun}${Math.floor(Math.random() * 100)}`;
    }

    async function getUserCountry() {
        try {
            const response = await fetch('https://ipapi.co/json/');
            const data = await response.json();
            if (data.country_code) {
                gameState.player.flag = String.fromCodePoint(
                    ...data.country_code.split('').map(c => 0x1f1e6 + c.charCodeAt(0) - 65)
                );
            }
        } catch (error) {
            console.log('Could not get country:', error);
        }
        savePlayerData();
    }

    function savePlayerData() {
        try {
            // Save main player data
            localStorage.setItem('monsterSurvivorsPlayer', JSON.stringify(gameState.player));
            
            // Create backup with timestamp
            const backup = {
                player: gameState.player,
                version: '2.0',
                timestamp: Date.now()
            };
            localStorage.setItem('monsterSurvivorsBackup', JSON.stringify(backup));
            
            // Clean old data if storage is getting full
            cleanupOldData();
        } catch (error) {
            console.error('Failed to save player data:', error);
            showFloatingMessage('⚠️ Save failed - storage may be full');
        }
    }

    function cleanupOldData() {
        try {
            // Remove old chat messages beyond 100
            const chatData = JSON.parse(localStorage.getItem('chatMessages') || '[]');
            if (chatData.length > 100) {
                localStorage.setItem('chatMessages', JSON.stringify(chatData.slice(-50)));
            }
            
            // Remove old scores beyond 50
            const scores = JSON.parse(localStorage.getItem('recentScores') || '[]');
            if (scores.length > 50) {
                localStorage.setItem('recentScores', JSON.stringify(scores.slice(0, 25)));
            }
        } catch (error) {
            console.error('Cleanup failed:', error);
        }
    }

    function exportPlayerData() {
        const exportData = {
            player: gameState.player,
            recentScores: JSON.parse(localStorage.getItem('recentScores') || '[]'),
            version: '2.0',
            exportDate: new Date().toISOString()
        };
        
        const dataStr = JSON.stringify(exportData, null, 2);
        const dataBlob = new Blob([dataStr], {type: 'application/json'});
        
        const link = document.createElement('a');
        link.href = URL.createObjectURL(dataBlob);
        link.download = `monster-survivors-data-${Date.now()}.json`;
        link.click();
        
        showFloatingMessage('Data exported! 📁');
    }

    // Game Loading with Progress (Simplified & Fixed)
    function loadGameWithProgress() {
        const loader = document.getElementById('game-loader');
        const iframe = document.getElementById('game-iframe');
        const fallback = document.getElementById('game-fallback');
        const progress = document.getElementById('loading-progress');
        
        let currentProgress = 0;
        let progressInterval;
        let loadTimeout;
        
        // Progress animation
        progressInterval = setInterval(() => {
            currentProgress += Math.random() * 8 + 2; // Slower, more realistic progress
            if (currentProgress > 90) {
                currentProgress = 90;
                clearInterval(progressInterval);
            }
            if (progress) progress.style.width = currentProgress + '%';
        }, 300);

        // Game loaded successfully
        iframe.onload = () => {
            gameState.isGameLoaded = true;
            if (progress) progress.style.width = '100%';
            setTimeout(() => {
                if (loader) loader.style.display = 'none';
                clearInterval(progressInterval);
                clearTimeout(loadTimeout);
                showFloatingMessage('Game loaded! 🎮 Have fun!');
            }, 800);
        };

        // Game failed to load
        iframe.onerror = () => {
            clearInterval(progressInterval);
            clearTimeout(loadTimeout);
            if (loader) loader.style.display = 'none';
            if (fallback) fallback.classList.remove('hidden');
            showFloatingMessage('❌ Game failed to load');
        };

        // Extended timeout for Unity games (30 seconds)
        loadTimeout = setTimeout(() => {
            if (!gameState.isGameLoaded) {
                clearInterval(progressInterval);
                if (loader) loader.style.display = 'none';
                if (fallback) fallback.classList.remove('hidden');
                showFloatingMessage('⏰ Game loading timeout - check your connection');
            }
        }, 30000); // 30 seconds timeout
    }

    // Event Listeners Setup
    function setupEventListeners() {
        // Nickname change
        document.getElementById('change-nickname-btn').onclick = () => {
            document.getElementById('nickname-modal').classList.remove('hidden');
        };

        document.getElementById('random-name-btn').onclick = () => {
            generateRandomNickname();
            document.getElementById('new-nickname-input').value = gameState.player.nickname;
        };

        document.getElementById('save-nickname-btn').onclick = () => {
            const newName = document.getElementById('new-nickname-input').value.trim();
            if (newName && newName.length >= 3) {
                gameState.player.nickname = newName;
                savePlayerData();
                updateUI();
                document.getElementById('nickname-modal').classList.add('hidden');
                showFloatingMessage('Nickname updated! 🎉');
            }
        };

        document.getElementById('cancel-nickname-btn').onclick = () => {
            document.getElementById('nickname-modal').classList.add('hidden');
        };

        // Manual score recording
        document.getElementById('manual-score-btn').onclick = () => {
            document.getElementById('manual-score-modal').classList.remove('hidden');
        };

        document.getElementById('cancel-manual-score-btn').onclick = () => {
            document.getElementById('manual-score-modal').classList.add('hidden');
        };

        document.getElementById('save-manual-score-btn').onclick = () => {
            const timeInput = document.getElementById('manual-time-input').value.trim();
            const kills = parseInt(document.getElementById('manual-kills-input').value) || 0;
            const level = parseInt(document.getElementById('manual-level-input').value) || 1;

            // Validate time format (MM:SS)
            const timeMatch = timeInput.match(/^(\d+):(\d{2})$/);
            if (!timeMatch) {
                alert('Please enter time in MM:SS format (e.g., 5:43)');
                return;
            }

            const minutes = parseInt(timeMatch[1]);
            const seconds = parseInt(timeMatch[2]);
            const totalSeconds = minutes * 60 + seconds;

            if (totalSeconds < 1) {
                alert('Survival time must be at least 1 second');
                return;
            }

            // Calculate score based on time, kills, and level
            const score = totalSeconds * 10 + kills * 5 + level * 50;

            // Record the score
            handleGameScore({
                score: score,
                time: totalSeconds,
                kills: kills,
                level: level,
                isManual: true
            });

            // Update share modal with new data
            document.getElementById('share-time').textContent = timeInput;

            // Clear inputs and close modal
            document.getElementById('manual-time-input').value = '';
            document.getElementById('manual-kills-input').value = '';
            document.getElementById('manual-level-input').value = '';
            document.getElementById('manual-score-modal').classList.add('hidden');

            showFloatingMessage('Score recorded! 🎉 Check your stats!');
        };

        // Share functionality
        document.getElementById('share-profile-btn').onclick = () => {
            document.getElementById('share-modal').classList.remove('hidden');
        };

        document.getElementById('close-share-modal').onclick = () => {
            document.getElementById('share-modal').classList.add('hidden');
        };

        document.getElementById('copy-link-btn').onclick = () => {
            navigator.clipboard.writeText(window.location.href);
            showFloatingMessage('Link copied! 📋');
        };

        // Export data functionality
        document.getElementById('export-data-btn').onclick = exportPlayerData;

        // Social sharing functionality
        document.getElementById('share-facebook-btn').onclick = () => {
            const shareText = `Just survived ${document.getElementById('share-time').textContent} in Monster Survivors! 🎮 Think you can beat my score?`;
            const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}&quote=${encodeURIComponent(shareText)}`;
            window.open(shareUrl, '_blank', 'width=600,height=400');
        };

        document.getElementById('share-twitter-btn').onclick = () => {
            const shareText = `Just survived ${document.getElementById('share-time').textContent} in Monster Survivors! 🎮 Think you can beat my score?`;
            const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(window.location.href)}&hashtags=MonsterSurvivors,Gaming,Survival`;
            window.open(shareUrl, '_blank', 'width=600,height=400');
        };

        document.getElementById('share-whatsapp-btn').onclick = () => {
            const shareText = `Just survived ${document.getElementById('share-time').textContent} in Monster Survivors! 🎮 Think you can beat my score? ${window.location.href}`;
            const shareUrl = `https://wa.me/?text=${encodeURIComponent(shareText)}`;
            window.open(shareUrl, '_blank');
        };

        // Chat functionality
        document.getElementById('send-chat-btn').onclick = sendChatMessage;
        document.getElementById('chat-input').onkeypress = (e) => {
            if (e.key === 'Enter') sendChatMessage();
        };

        // Game retry functionality
        document.getElementById('retry-game-btn').onclick = () => {
            const iframe = document.getElementById('game-iframe');
            const loader = document.getElementById('game-loader');
            const fallback = document.getElementById('game-fallback');
            
            // Reset game state
            gameState.isGameLoaded = false;
            
            // Hide fallback, show loader
            fallback.classList.add('hidden');
            loader.style.display = 'flex';
            
            // Force iframe reload by changing src
            const currentSrc = iframe.src;
            iframe.src = '';
            setTimeout(() => {
                iframe.src = currentSrc + '?retry=' + Date.now();
                loadGameWithProgress();
            }, 100);
            
            showFloatingMessage('🔄 Retrying game load...');
        };

        // Fullscreen
        document.getElementById('fullscreen-btn').onclick = () => {
            const iframe = document.getElementById('game-iframe');
            if (iframe.requestFullscreen) {
                iframe.requestFullscreen();
            }
        };

        // Game message listener (for score updates) - Simplified
        window.addEventListener('message', (event) => {
            try {
                // Verify message origin for security
                const allowedOrigins = ['https://cloud.onlinegames.io', window.location.origin];
                if (!allowedOrigins.includes(event.origin)) {
                    return; // Ignore messages from unknown origins
                }
                
                if (event.data?.type === 'gameScore') {
                    handleGameScore(event.data);
                } else if (event.data?.type === 'gameLoaded') {
                    showFloatingMessage('Game loaded successfully! 🎮');
                } else if (event.data?.type === 'gameError') {
                    showFloatingMessage('⚠️ Game encountered an error');
                    console.error('Game error:', event.data.error);
                }
            } catch (error) {
                console.error('Error handling game message:', error);
            }
        });
    }

    // UI Updates
    function updateUI() {
        document.getElementById('player-nickname').textContent = gameState.player.nickname;
        document.getElementById('player-flag').textContent = gameState.player.flag;
        document.getElementById('player-level').textContent = gameState.player.level;
        document.getElementById('player-xp').textContent = gameState.player.xp;
        document.getElementById('games-played').textContent = gameState.player.gamesPlayed;
        document.getElementById('total-kills').textContent = gameState.player.totalKills;
        document.getElementById('high-score').textContent = gameState.player.highScore;
        document.getElementById('best-time').textContent = formatTime(gameState.player.bestTime);
        document.getElementById('total-time').textContent = formatTotalTime(gameState.player.totalTime);
        
        updateAchievements();
    }

    function updateAchievements() {
        const grid = document.getElementById('achievement-grid');
        const newlyUnlocked = [];
        
        // Check for newly unlocked achievements
        achievements.forEach(ach => {
            const wasUnlocked = gameState.player.achievements.includes(ach.id);
            const isNowUnlocked = ach.unlock();
            
            if (!wasUnlocked && isNowUnlocked) {
                gameState.player.achievements.push(ach.id);
                newlyUnlocked.push(ach);
                gameState.player.xp += 100; // XP reward for achievements
            }
        });

        // Show newly unlocked achievements
        newlyUnlocked.forEach(ach => {
            showAchievementUnlocked(ach);
        });

        // Render achievement grid
        grid.innerHTML = achievements.map(ach => {
            const unlocked = gameState.player.achievements.includes(ach.id);
            return `
                <div class="achievement-card bg-white rounded-xl p-4 text-center shadow-md ${unlocked ? 'achievement-unlocked' : 'achievement-locked'}">
                    <div class="text-3xl mb-2">${ach.icon}</div>
                    <h4 class="font-bold text-sm mb-1">${ach.title}</h4>
                    <p class="text-xs text-gray-600">${ach.desc}</p>
                    ${unlocked ? '<div class="text-xs text-green-600 font-bold mt-1">✓ UNLOCKED</div>' : '<div class="text-xs text-gray-400 mt-1">🔒 Locked</div>'}
                </div>
            `;
        }).join('');

        document.getElementById('achievement-count').textContent = `${gameState.player.achievements.length}/${achievements.length}`;
        
        if (newlyUnlocked.length > 0) {
            savePlayerData();
        }
    }

    // Chat System
    function initializeChat() {
        // Simulate some initial chat messages
        const sampleMessages = [
            { user: '🇺🇸 ProGamer', message: 'Just beat my record! 15:42! 🎉', time: Date.now() - 120000 },
            { user: '🇯🇵 SurvivalKing', message: 'Anyone want to share strategies?', time: Date.now() - 300000 },
            { user: '🇩🇪 MonsterHunter', message: 'New update is amazing! 🔥', time: Date.now() - 600000 }
        ];
        
        gameState.chat = sampleMessages;
        renderChat();
    }

    function sendChatMessage() {
        const input = document.getElementById('chat-input');
        const message = input.value.trim();
        
        if (message && message.length > 0) {
            gameState.chat.push({
                user: `${gameState.player.flag} ${gameState.player.nickname}`,
                message: message,
                time: Date.now()
            });
            
            input.value = '';
            renderChat();
            
            // Keep only last 50 messages
            if (gameState.chat.length > 50) {
                gameState.chat = gameState.chat.slice(-50);
            }
        }
    }

    function renderChat() {
        const container = document.getElementById('chat-messages');
        container.innerHTML = gameState.chat.map(msg => `
            <div class="chat-message mb-2 p-2 bg-white rounded-lg shadow-sm">
                <div class="flex justify-between items-start">
                    <span class="font-bold text-sm">${msg.user}</span>
                    <span class="text-xs text-gray-500">${formatTimeAgo(msg.time)}</span>
                </div>
                <p class="text-sm mt-1">${msg.message}</p>
            </div>
        `).join('');
        
        container.scrollTop = container.scrollHeight;
    }

    // Game Score Handling
    function handleGameScore(data) {
        const { score, time, kills, level, isManual } = data;
        
        gameState.player.gamesPlayed++;
        gameState.player.totalTime += time;
        gameState.player.totalKills += kills;
        
        if (score > gameState.player.highScore) {
            gameState.player.highScore = score;
            showFloatingMessage('New High Score! 🏆');
        }
        
        if (time > gameState.player.bestTime) {
            gameState.player.bestTime = time;
            showFloatingMessage('New Best Time! ⏰');
        }
        
        // Level up system - use provided level if manual, otherwise calculate
        if (isManual && level > gameState.player.level) {
            gameState.player.level = level;
            showFloatingMessage(`Level Updated! Level ${level}! 🌟`);
        } else {
            const newLevel = Math.floor(gameState.player.xp / 1000) + 1;
            if (newLevel > gameState.player.level) {
                gameState.player.level = newLevel;
                showFloatingMessage(`Level Up! Level ${newLevel}! 🌟`);
            }
        }
        
        // XP calculation - bonus for manual recording
        const xpGain = Math.floor(score / 10) + time + (isManual ? 50 : 0);
        gameState.player.xp += xpGain;
        
        updateUI();
        savePlayerData();
        
        // Add to recent scores with manual indicator
        addRecentScore(score, time, isManual);
    }

    function addRecentScore(score, time, isManual = false) {
        const recentScores = JSON.parse(localStorage.getItem('recentScores') || '[]');
        recentScores.unshift({
            user: `${gameState.player.flag} ${gameState.player.nickname}`,
            score: score,
            time: time,
            timestamp: Date.now(),
            isManual: isManual
        });
        
        // Keep only last 10 scores
        recentScores.splice(10);
        localStorage.setItem('recentScores', JSON.stringify(recentScores));
        
        renderRecentScores();
    }

    function renderRecentScores() {
        const container = document.getElementById('recent-scores');
        const scores = JSON.parse(localStorage.getItem('recentScores') || '[]');
        
        container.innerHTML = scores.slice(0, 5).map(score => `
            <div class="flex justify-between items-center bg-white rounded-lg p-3 shadow-sm">
                <span class="font-medium">${score.user}</span>
                <div class="text-right">
                    <div class="text-sm text-gray-600">${formatTime(score.time)} • ${score.score} pts</div>
                    ${score.isManual ? '<span class="text-xs text-orange-500">📝 Manual</span>' : '<span class="text-xs text-green-500">🎮 Auto</span>'}
                </div>
            </div>
        `).join('');
    }

    // Utility Functions
    function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    function formatTotalTime(seconds) {
        const hours = Math.floor(seconds / 3600);
        const mins = Math.floor((seconds % 3600) / 60);
        return `${hours}h ${mins}m`;
    }

    function formatTimeAgo(timestamp) {
        const diff = Date.now() - timestamp;
        const mins = Math.floor(diff / 60000);
        if (mins < 1) return 'now';
        if (mins < 60) return `${mins}m ago`;
        const hours = Math.floor(mins / 60);
        if (hours < 24) return `${hours}h ago`;
        return `${Math.floor(hours / 24)}d ago`;
    }

    function showFloatingMessage(message) {
        const div = document.createElement('div');
        div.className = 'fixed top-20 right-4 bg-primary text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-bounce-in';
        div.textContent = message;
        document.body.appendChild(div);
        
        setTimeout(() => {
            div.remove();
        }, 3000);
    }

    function showAchievementUnlocked(achievement) {
        const div = document.createElement('div');
        div.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-yellow-400 to-yellow-600 text-white p-8 rounded-2xl shadow-2xl z-50 text-center animate-bounce-in';
        div.innerHTML = `
            <div class="text-6xl mb-4">${achievement.icon}</div>
            <h3 class="text-2xl font-bold mb-2">Achievement Unlocked!</h3>
            <h4 class="text-xl mb-2">${achievement.title}</h4>
            <p class="text-lg">${achievement.desc}</p>
            <div class="mt-4 text-sm opacity-90">+100 XP</div>
        `;
        document.body.appendChild(div);
        
        setTimeout(() => {
            div.remove();
        }, 4000);
    }

    function startPlayerCountAnimation() {
        const element = document.getElementById('player-count');
        setInterval(() => {
            const base = 12800;
            const variation = Math.floor(Math.random() * 100) - 50;
            element.textContent = (base + variation).toLocaleString();
        }, 5000);
    }

    // Initialize recent scores on load
    setTimeout(renderRecentScores, 1000);
    </script>
</body>
</html>